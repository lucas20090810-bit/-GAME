const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DUtURa5l.js","assets/index-32BZgxng.js","assets/index-BGehO4k3.css"])))=>i.map(i=>d[i]);
import{r as G,_ as W}from"./index-32BZgxng.js";const R="__capgo_keep_url_path_after_reload",g="__capgo_history_stack__",k=100,B=typeof window<"u"&&typeof document<"u"&&typeof history<"u";if(B){const e=window;if(!e.__capgoHistoryPatched){e.__capgoHistoryPatched=!0;const I=()=>{try{if(e.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return window.localStorage.getItem(R)==="1"}catch{return!1}},d=()=>{try{const t=window.sessionStorage.getItem(g);if(!t)return{stack:[],index:-1};const r=JSON.parse(t);return!r||!Array.isArray(r.stack)||typeof r.index!="number"?{stack:[],index:-1}:r}catch{return{stack:[],index:-1}}},f=(t,r)=>{try{window.sessionStorage.setItem(g,JSON.stringify({stack:t,index:r}))}catch{}},P=()=>{try{window.sessionStorage.removeItem(g)}catch{}},u=t=>{try{const r=t??window.location.href,o=new URL(r instanceof URL?r.toString():r,window.location.href);return`${o.pathname}${o.search}${o.hash}`}catch{return null}},y=(t,r)=>{if(t.length<=k)return{stack:t,index:r};const o=t.length-k,n=t.slice(o),c=Math.max(0,r-o);return{stack:n,index:c}},T=t=>{document.readyState==="complete"||document.readyState==="interactive"?t():window.addEventListener("DOMContentLoaded",t,{once:!0})};let s=!1,h=!1,E=!1;const N=()=>{if(!s)return;const t=d(),r=u();if(r){if(t.stack.length===0){t.stack.push(r),t.index=0,f(t.stack,t.index);return}(t.index<0||t.index>=t.stack.length)&&(t.index=t.stack.length-1),t.stack[t.index]!==r&&(t.stack[t.index]=r,f(t.stack,t.index))}},w=(t,r)=>{if(!s||h)return;const o=u(t);if(!o)return;let{stack:n,index:c}=d();n.length===0?(n.push(o),c=n.length-1):r?((c<0||c>=n.length)&&(c=n.length-1),n[c]=o):c>=n.length-1?(n.push(o),c=n.length-1):(n=n.slice(0,c+1),n.push(o),c=n.length-1),{stack:n,index:c}=y(n,c),f(n,c)},v=()=>{if(!s||h)return;const t=d();if(t.stack.length===0){N();return}const r=t.index>=0&&t.index<t.stack.length?t.index:t.stack.length-1,o=u();if(t.stack.length===1&&o===t.stack[0])return;const n=t.stack[0];if(!n)return;h=!0;try{history.replaceState(history.state,document.title,n);for(let _=1;_<t.stack.length;_+=1)history.pushState(history.state,document.title,t.stack[_])}catch{h=!1;return}h=!1;const c=t.stack.length-1,D=r-c;D!==0?history.go(D):(history.replaceState(history.state,document.title,t.stack[r]),window.dispatchEvent(new PopStateEvent("popstate")))},A=()=>{!s||E||(E=!0,T(()=>{E=!1,v()}))};let i=null,a=null;const O=()=>{if(!s||h)return;const t=u();if(!t)return;const r=d(),o=r.stack.lastIndexOf(t);o>=0?r.index=o:(r.stack.push(t),r.index=r.stack.length-1);const n=y(r.stack,r.index);f(n.stack,n.index)},K=()=>{i&&a||(i=history.pushState,a=history.replaceState,history.pushState=function(r,o,n){const c=i?.call(history,r,o,n);return w(n,!1),c},history.replaceState=function(r,o,n){const c=a?.call(history,r,o,n);return w(n,!0),c},window.addEventListener("popstate",O))},x=()=>{i&&(history.pushState=i,i=null),a&&(history.replaceState=a,a=null),window.removeEventListener("popstate",O)},L=t=>{if(s===t){s&&(N(),A());return}s=t,s?(K(),N(),A()):(x(),P())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",t=>{var r;const o=t,n=(r=o?.detail)===null||r===void 0?void 0:r.enabled;typeof n=="boolean"?(e.__capgoKeepUrlPathAfterReload=n,L(n)):(e.__capgoKeepUrlPathAfterReload=!0,L(!0))}),L(I())}}var S;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UPDATE_NOT_AVAILABLE=1]="UPDATE_NOT_AVAILABLE",e[e.UPDATE_AVAILABLE=2]="UPDATE_AVAILABLE",e[e.UPDATE_IN_PROGRESS=3]="UPDATE_IN_PROGRESS"})(S||(S={}));var l;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.INSTALLING=3]="INSTALLING",e[e.INSTALLED=4]="INSTALLED",e[e.FAILED=5]="FAILED",e[e.CANCELED=6]="CANCELED",e[e.DOWNLOADED=11]="DOWNLOADED"})(l||(l={}));var m;(function(e){e[e.OK=0]="OK",e[e.CANCELED=1]="CANCELED",e[e.FAILED=2]="FAILED",e[e.NOT_AVAILABLE=3]="NOT_AVAILABLE",e[e.NOT_ALLOWED=4]="NOT_ALLOWED",e[e.INFO_MISSING=5]="INFO_MISSING"})(m||(m={}));const H=G("CapacitorUpdater",{web:()=>W(()=>import("./web-DUtURa5l.js"),__vite__mapDeps([0,1,2])).then(e=>new e.CapacitorUpdaterWeb)});export{S as AppUpdateAvailability,m as AppUpdateResultCode,H as CapacitorUpdater,l as FlexibleUpdateInstallStatus};
